{"ast":null,"code":"var _jsxFileName = \"/Users/kalebamarante/graph-eth/graph-eth/packages/react-app/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useQuery } from \"@apollo/client\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { shortenAddress, useCall, useEthers, useLookupAddress } from \"@usedapp/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { Body, Button, Container, Header, Image, Link } from \"./components\";\nimport logo from \"./ethereumLogo.png\";\nimport { addresses, abis } from \"@my-app/contracts\";\nimport GET_TRANSFERS from \"./graphql/subgraph\";\nimport { getDefaultProvider } from \"@ethersproject/providers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function readOnChainData() {\n  // Should replace with the end-user wallet, e.g. Metamask\n  const defaultProvider = getDefaultProvider(); // Create an instance of an ethers.js Contract\n  // Read more about ethers.js on https://docs.ethers.io/v5/api/contract/contract/\n\n  const ceaErc20 = new Contract(addresses.ceaErc20, abis.erc20, defaultProvider); // A pre-defined address that owns some CEAERC20 tokens\n\n  const tokenBalance = await ceaErc20.balanceOf(\"0x3f8CB69d9c0ED01923F11c829BaE4D9a4CB6c82C\");\n  console.log({\n    tokenBalance: tokenBalance.toString()\n  });\n}\n\nfunction WalletButton() {\n  _s();\n\n  const [rendered, setRendered] = useState(\"\");\n  const ens = useLookupAddress();\n  const {\n    account,\n    activateBrowserWallet,\n    deactivate,\n    error\n  } = useEthers();\n  useEffect(() => {\n    if (ens) {\n      setRendered(ens);\n    } else if (account) {\n      setRendered(shortenAddress(account));\n    } else {\n      setRendered(\"\");\n    }\n  }, [account, ens, setRendered]);\n  useEffect(() => {\n    if (error) {\n      console.error(\"Error while connecting wallet:\", error.message);\n    }\n  }, [error]);\n  return /*#__PURE__*/_jsxDEV(Button, {\n    onClick: () => {\n      if (!account) {\n        activateBrowserWallet();\n      } else {\n        deactivate();\n      }\n    },\n    children: [rendered === \"\" && \"Connect Wallet\", rendered !== \"\" && rendered]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_s(WalletButton, \"sRcO3zOy9MSH6yXVoaLBPb5d5rA=\", false, function () {\n  return [useLookupAddress, useEthers];\n});\n\n_c = WalletButton;\n\nfunction App() {\n  _s2();\n\n  var _useCall;\n\n  // Read more about useDapp on https://usedapp.io/\n  const {\n    error: contractCallError,\n    value: tokenBalance\n  } = (_useCall = useCall({\n    contract: new Contract(addresses.ceaErc20, abis.erc20),\n    method: \"balanceOf\",\n    args: [\"0x3f8CB69d9c0ED01923F11c829BaE4D9a4CB6c82C\"]\n  })) !== null && _useCall !== void 0 ? _useCall : {};\n  const {\n    loading,\n    error: subgraphQueryError,\n    data\n  } = useQuery(GET_TRANSFERS);\n  useEffect(() => {\n    if (subgraphQueryError) {\n      console.error(\"Error while querying subgraph:\", subgraphQueryError.message);\n      return;\n    }\n\n    if (!loading && data && data.transfers) {\n      console.log({\n        transfers: data.transfers\n      });\n    }\n  }, [loading, subgraphQueryError, data]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: /*#__PURE__*/_jsxDEV(WalletButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Body, {\n      children: [/*#__PURE__*/_jsxDEV(Image, {\n        src: logo,\n        alt: \"ethereum-logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Edit \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"packages/react-app/src/App.js\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 16\n        }, this), \" and save to reload.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => readOnChainData(),\n        children: \"Read on chain Balance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"https://reactjs.org\",\n        children: \"Learn React\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"https://usedapp.io/\",\n        children: \"Learn useDapp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"https://thegraph.com/docs/quick-start\",\n        children: \"Learn The Graph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"ce7HVGBEHRzJ7xiHAYJGTi8rZr8=\", false, function () {\n  return [useCall, useQuery];\n});\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"WalletButton\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["useQuery","Contract","shortenAddress","useCall","useEthers","useLookupAddress","React","useEffect","useState","Body","Button","Container","Header","Image","Link","logo","addresses","abis","GET_TRANSFERS","getDefaultProvider","readOnChainData","defaultProvider","ceaErc20","erc20","tokenBalance","balanceOf","console","log","toString","WalletButton","rendered","setRendered","ens","account","activateBrowserWallet","deactivate","error","message","App","contractCallError","value","contract","method","args","loading","subgraphQueryError","data","transfers"],"sources":["/Users/kalebamarante/graph-eth/graph-eth/packages/react-app/src/App.js"],"sourcesContent":["import { useQuery } from \"@apollo/client\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { shortenAddress, useCall, useEthers, useLookupAddress } from \"@usedapp/core\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { Body, Button, Container, Header, Image, Link } from \"./components\";\nimport logo from \"./ethereumLogo.png\";\n\nimport { addresses, abis } from \"@my-app/contracts\";\nimport GET_TRANSFERS from \"./graphql/subgraph\";\nimport { getDefaultProvider } from \"@ethersproject/providers\";\n\n\nasync function readOnChainData() {\n  // Should replace with the end-user wallet, e.g. Metamask\n  const defaultProvider = getDefaultProvider();\n  // Create an instance of an ethers.js Contract\n  // Read more about ethers.js on https://docs.ethers.io/v5/api/contract/contract/\n  const ceaErc20 = new Contract(addresses.ceaErc20, abis.erc20, defaultProvider);\n  // A pre-defined address that owns some CEAERC20 tokens\n  const tokenBalance = await ceaErc20.balanceOf(\"0x3f8CB69d9c0ED01923F11c829BaE4D9a4CB6c82C\");\n  console.log({ tokenBalance: tokenBalance.toString() });\n}\n\nfunction WalletButton() {\n  const [rendered, setRendered] = useState(\"\");\n\n  const ens = useLookupAddress();\n  const { account, activateBrowserWallet, deactivate, error } = useEthers();\n\n  useEffect(() => {\n    if (ens) {\n      setRendered(ens);\n    } else if (account) {\n      setRendered(shortenAddress(account));\n    } else {\n      setRendered(\"\");\n    }\n  }, [account, ens, setRendered]);\n\n  useEffect(() => {\n    if (error) {\n      console.error(\"Error while connecting wallet:\", error.message);\n    }\n  }, [error]);\n\n  return (\n    <Button\n      onClick={() => {\n        if (!account) {\n          activateBrowserWallet();\n        } else {\n          deactivate();\n        }\n      }}\n    >\n      {rendered === \"\" && \"Connect Wallet\"}\n      {rendered !== \"\" && rendered}\n    </Button>\n  );\n}\n\nfunction App() {\n  // Read more about useDapp on https://usedapp.io/\n  const { error: contractCallError, value: tokenBalance } =\n    useCall({\n       contract: new Contract(addresses.ceaErc20, abis.erc20),\n       method: \"balanceOf\",\n       args: [\"0x3f8CB69d9c0ED01923F11c829BaE4D9a4CB6c82C\"],\n    }) ?? {};\n\n  const { loading, error: subgraphQueryError, data } = useQuery(GET_TRANSFERS);\n\n  useEffect(() => {\n    if (subgraphQueryError) {\n      console.error(\"Error while querying subgraph:\", subgraphQueryError.message);\n      return;\n    }\n    if (!loading && data && data.transfers) {\n      console.log({ transfers: data.transfers });\n    }\n  }, [loading, subgraphQueryError, data]);\n\n  return (\n    <Container>\n      <Header>\n        <WalletButton />\n      </Header>\n      <Body>\n        <Image src={logo} alt=\"ethereum-logo\" />\n        <p>\n          Edit <code>packages/react-app/src/App.js</code> and save to reload.\n        </p>\n        <Button onClick={() => readOnChainData()}>\n          Read on chain Balance\n        </Button>\n        <Link href=\"https://reactjs.org\">\n          Learn React\n        </Link>\n        <Link href=\"https://usedapp.io/\">Learn useDapp</Link>\n        <Link href=\"https://thegraph.com/docs/quick-start\">Learn The Graph</Link>\n      </Body>\n    </Container>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}